@using DoggyLife.Models.Storage.Settings
@using DoggyLife.Services
@inject RoomService RoomService

<div class="room-visualizer">
    <h4>Room Preview</h4>
    <div class="visualizer-canvas">
        <P5Canvas Width="300px" Height="200px" @ref="p5Canvas" OnP5Ready="OnP5Ready" />
    </div>
</div>

@code {
    private P5Canvas? p5Canvas;

    [Parameter]
    public RoomSettings? Settings { get; set; }
    
    public async Task RefreshCanvas()
    {
        if (p5Canvas != null)
        {
            await p5Canvas.UpdateCanvasAsync();
        }
    }

    private async Task OnP5Ready(object _)
    {
        // P5.js canvas is ready and initialized
        await RefreshCanvas();
    }
}
